fork()这个函数，我用了一天半时间才写好、调试好。
期间遇到一些问题：
	1、fork克隆出来的子进程运行的虚拟地址和父进程相同，但是物理地址不同。因此中断到来时就需要判断此时系统处于哪个进程的虚拟地址上。而我之前写的中断入口函数，没有加载内核DS，就直接对reenter变量进行操作，导致每次操作不确定在哪个物理地址上，系统一调用fork就出错重启。
	2、IPC机制也受虚拟地址影响。之前看到于渊书中IPC那章代码里加了va2la() phycopy()这两个函数，当时就猜想以后肯定会涉及到虚拟地址的变换。但是在我实现IPC的时候，没去想那么远，当时的所有进程虚拟地址都和物理地址相同，不转换也没问题。正如于渊说的“我实在是太心急了”“我实在是太懒了”“过早的优化是万恶之源”，我也就没去整这两个函数。今天写到fork的时候不得不进行虚拟地址转换，就把这两个函数加上了。
	3、虚拟地址的实现方法主要有两大类：
		1、用描述符通过设置不同的段基址产生虚拟地址
		2、每个进程自带属于自己的页目录、页表，任务切换时加载自己的页目录，实现虚拟地址切换
覃攀	QQ:407802625	2013-12-7 00:45